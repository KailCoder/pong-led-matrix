<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="600" viewBox="0 0 1200 600">
  <style>
    .box { fill:#f6f9ff; stroke:#2b6cb0; stroke-width:2; rx:8; }
    .title { font: bold 16px sans-serif; fill:#0b3d91; }
    .label { font: 14px sans-serif; fill:#0b2340; }
    .line { stroke:#2b6cb0; stroke-width:2; marker-end:url(#arrow); }
    .sub { font: 12px sans-serif; fill:#07304a; }
  </style>
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="5" orient="auto">
      <path d="M0,0 L10,5 L0,10 z" fill="#2b6cb0"/>
    </marker>
  </defs>

  <!-- Clock block -->
  <rect x="40" y="40" width="180" height="80" class="box"/>
  <text x="130" y="70" text-anchor="middle" class="title">Clock Generator</text>
  <text x="130" y="92" text-anchor="middle" class="sub">fast scan + game tick</text>

  <!-- Scan counter -->
  <rect x="260" y="40" width="210" height="80" class="box"/>
  <text x="365" y="70" text-anchor="middle" class="title">Scan Counter</text>
  <text x="365" y="92" text-anchor="middle" class="sub">74HC161 / 74HC163 (Q0..Q2)</text>

  <!-- Decoder -->
  <rect x="520" y="40" width="220" height="80" class="box"/>
  <text x="630" y="70" text-anchor="middle" class="title">Row Decoder</text>
  <text x="630" y="92" text-anchor="middle" class="sub">74HC138 → Row enables Y0..Y7</text>

  <!-- Matrix -->
  <rect x="820" y="40" width="320" height="240" class="box"/>
  <text x="980" y="70" text-anchor="middle" class="title">LED Matrix 8×8</text>
  <text x="980" y="95" text-anchor="middle" class="sub">Rows (driven by 74HC138)</text>
  <text x="980" y="115" text-anchor="middle" class="sub">Columns (driven by 74HC595)</text>

  <!-- Column drivers -->
  <rect x="520" y="160" width="260" height="120" class="box"/>
  <text x="650" y="190" text-anchor="middle" class="title">Column Drivers</text>
  <text x="650" y="212" text-anchor="middle" class="sub">2 × 74HC595 (Q0..Q7)</text>
  <text x="650" y="232" text-anchor="middle" class="sub">SRCLK / RCLK / OE</text>

  <!-- Game Logic -->
  <rect x="260" y="160" width="220" height="220" class="box"/>
  <text x="370" y="190" text-anchor="middle" class="title">Game Logic / FSM</text>
  <text x="370" y="212" text-anchor="middle" class="sub">Ball regs (x,y,dx,dy)</text>
  <text x="370" y="232" text-anchor="middle" class="sub">Paddles, collision, update</text>
  <text x="370" y="252" text-anchor="middle" class="sub">Updates column data bus</text>

  <!-- Buttons -->
  <rect x="40" y="160" width="180" height="120" class="box"/>
  <text x="130" y="190" text-anchor="middle" class="title">Buttons &amp; Debounce</text>
  <text x="130" y="212" text-anchor="middle" class="sub">RC + 74HC14 + synchronizer</text>

  <!-- Connections: Clock -> Scan counter -->
  <line x1="220" y1="80" x2="260" y2="80" class="line"/>
  <text x="240" y="70" class="label" text-anchor="middle">fast clock</text>

  <!-- Clock -> Game Logic -->
  <line x1="220" y1="160" x2="260" y2="160" class="line"/>
  <text x="240" y="150" class="label" text-anchor="middle">game tick</text>

  <!-- Counter -> Decoder -->
  <line x1="470" y1="80" x2="520" y2="80" class="line"/>
  <text x="495" y="70" class="label" text-anchor="middle">Q0..Q2</text>

  <!-- Decoder -> Matrix rows -->
  <line x1="740" y1="80" x2="820" y2="80" class="line"/>
  <text x="780" y="70" class="label" text-anchor="middle">Y0..Y7 (rows)</text>

  <!-- Column drivers -> Matrix cols -->
  <line x1="780" y1="220" x2="820" y2="150" class="line"/>
  <text x="800" y="185" class="label" text-anchor="middle">Q0..Q7 (cols)</text>

  <!-- Game logic -> Column drivers -->
  <line x1="480" y1="260" x2="520" y2="220" class="line"/>
  <text x="500" y="250" class="label" text-anchor="middle">column data bus</text>

  <!-- Buttons -> Game logic -->
  <line x1="220" y1="220" x2="260" y2="220" class="line"/>
  <text x="240" y="210" class="label" text-anchor="middle">controls</text>

  <!-- Legend box -->
  <rect x="40" y="320" width="1100" height="220" fill="#fffef6" stroke="#9f7a16" stroke-width="1" rx="6"/>
  <text x="60" y="344" class="title">Notas rápidas</text>
  <text x="60" y="366" class="sub">- RCLK: latch 74HC595 cuando la columna esté lista</text>
  <text x="60" y="384" class="sub">- Actualizar 74HC595 durante RCLK entre filas para evitar glitches</text>
  <text x="60" y="402" class="sub">- Usar fast clock ≥ 1 kHz/row (ej. 2 kHz) para buen refresco</text>
  <text x="60" y="420" class="sub">- game tick ≈ 8–15 Hz</text>
</svg>